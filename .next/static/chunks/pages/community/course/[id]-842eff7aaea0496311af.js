_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[23],{"58ex":function(e,r,t){"use strict";t.d(r,"a",(function(){return c})),t.d(r,"b",(function(){return l})),t.d(r,"d",(function(){return u})),t.d(r,"c",(function(){return d}));var a=t("vJKn"),s=t.n(a),i=t("rg98"),n=t("1ZD8"),o=t("Dp36");function c(e){return Object(n.useQuery)("useGetlatestMaterials",Object(i.a)(s.a.mark((function r(){var t,a;return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,o.a.get("/api/supaRequests",{headers:{type:"COURSE-get-latest-materials",course_id:e}});case 2:return t=r.sent,a=t.data,r.abrupt("return",a);case 5:case"end":return r.stop()}}),r)}))))}function l(e){return Object(n.useQuery)("useGetLikedMaterials",Object(i.a)(s.a.mark((function r(){var t,a;return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,o.a.get("/api/supaRequests",{headers:{type:"HOME-get-liked-materials",current_user_id:e.id}});case 2:return t=r.sent,a=t.data,r.abrupt("return",a);case 5:case"end":return r.stop()}}),r)}))))}function u(e){return Object(n.useQuery)("useGetTopLikedMaterials",Object(i.a)(s.a.mark((function r(){var t,a;return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,o.a.get("/api/supaRequests",{headers:{type:"COURSE-get-top-liked-materials",course_id:e}});case 2:return t=r.sent,a=t.data,r.abrupt("return",a);case 5:case"end":return r.stop()}}),r)}))))}function d(e){return Object(n.useQuery)("useGetSeachedMaterials",Object(i.a)(s.a.mark((function r(){var t,a;return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,o.a.get("/api/supaRequests",{headers:{type:"SEARCH-get-searched-materials",search:e}});case 2:return t=r.sent,a=t.data,r.abrupt("return",a);case 5:case"end":return r.stop()}}),r)}))),{staleTime:5e3})}},"8PY8":function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/community/course/[id]",function(){return t("bl3l")}])},TsuU:function(e,r,t){"use strict";t.d(r,"a",(function(){return v}));var a=t("nKUr"),s=t("tofy"),i=t("MAJE"),n=t("M/Vb"),o=t("v7Hm"),c=t("z0gp"),l=t("8ZLp"),u=t("wZsY"),d=t("vG+z"),p=t("wCIg"),b=t("YFqc"),j=t.n(b),m=t("ma3e"),x=t("33Fu"),g=t("XtbJ"),h=t.n(g),f=t("kyeR"),O=t("l4Zi");function v(e){var r=e.materialArray,t=e.title,b=e.isLoading,g=void 0!==b&&b,v=e.isFetching,C=void 0!==v&&v,w=e.error,k=Object(O.a)();return Object(a.jsxs)(a.Fragment,{children:[!!t&&Object(a.jsxs)(s.a,{mt:"8",align:"center",children:[Object(a.jsx)(i.a,{fontSize:"3xl",fontWeight:"semibold",children:t}),C&&Object(a.jsx)(n.a,{color:"purple.600",size:"md",ml:"3"})]}),Object(a.jsx)(o.a,{width:"100%",pt:"4",mb:"4",children:g?Object(a.jsxs)(c.a,{w:"100%",spacing:"4",columns:[1,2,2,3],children:[Object(a.jsx)(l.a,{h:"96",startColor:"purple.600",endColor:"purple.800",borderRadius:"2xl"})," ",Object(a.jsx)(l.a,{h:"96",startColor:"purple.600",endColor:"purple.800",borderRadius:"2xl"})," ",Object(a.jsx)(l.a,{h:"96",startColor:"purple.600",endColor:"purple.800",borderRadius:"2xl"})," ",Object(a.jsx)(l.a,{h:"96",startColor:"purple.600",endColor:"purple.800",borderRadius:"2xl"}),Object(a.jsx)(l.a,{h:"96",startColor:"purple.600",endColor:"purple.800",borderRadius:"2xl"}),Object(a.jsx)(l.a,{h:"96",startColor:"purple.600",endColor:"purple.800",borderRadius:"2xl"})]}):w?Object(a.jsx)(i.a,{children:"Error in React Query, call de Tacobell"}):Object(a.jsx)(u.b,{w:"100%",children:r&&(null===r||void 0===r?void 0:r.length)>0?Object(a.jsx)(c.a,{w:"100%",spacing:"4",columns:[1,2,2,3],children:r.map((function(e){return Object(a.jsx)(j.a,{href:"/community/summary/".concat(e.id),children:Object(a.jsx)("a",{children:Object(a.jsxs)(o.a,{className:h.a.materialCard,position:"relative",bg:"purple.800",height:"96",borderRadius:"2xl",children:[Object(a.jsx)(d.a,{src:""!==e.image?e.image:"/assets/illustrations/MaterialImageSource.svg",alt:k.materialList.thumbAlt,w:"100%",h:"55%",borderTopRadius:"2xl",objectFit:"cover"}),Object(a.jsxs)(u.b,{position:"absolute",px:3,py:1,h:"45%",alignItems:"flex-start",children:[Object(a.jsx)(i.a,{fontSize:"lg",fontWeight:"600",noOfLines:3,children:e.name}),Object(a.jsx)(p.a,{}),Object(a.jsxs)(o.a,{alignItems:"flex-start",spacing:"0",pb:"1",children:[Object(a.jsxs)(s.a,{align:"baseline",children:[Object(a.jsx)(o.a,{mr:"1",color:"purple.500",children:Object(a.jsx)(x.a,{})}),Object(a.jsx)(i.a,{color:"purple.500",children:null!==e.likes&&1===e.likes?"".concat(e.likes," ").concat(k.materialList.like):e.likes>1?"".concat(e.likes," ").concat(k.materialList.like,"s"):"".concat(k.materialList.noLikes)})]}),Object(a.jsxs)(s.a,{align:"baseline",color:"purple.500",children:[Object(a.jsx)(m.b,{}),Object(a.jsx)(i.a,{ml:"1",children:e.users.name})]})]})]})]})})},e.id)}))}):Object(a.jsx)(f.a,{h:"96",w:"100%",boxSize:"120px",activeBackground:!0})})})]})}},XtbJ:function(e,r,t){e.exports={materialCard:"styles_materialCard__hD5Mo",fadeIn:"styles_fadeIn__2imn3"}},bl3l:function(e,r,t){"use strict";t.r(r),t.d(r,"__N_SSP",(function(){return U})),t.d(r,"default",(function(){return B}));var a=t("nKUr"),s=t("vJKn"),i=t.n(s),n=t("rg98"),o=t("xvhg"),c=t("VP/N"),l=t("0HfK"),u=t("v7Hm"),d=t("vG+z"),p=t("wZsY"),b=t("MAJE"),j=t("wCIg"),m=t("3L07"),x=t("oSKe"),g=t("ueHc"),h=t("kiPq"),f=t("g4pe"),O=t.n(f),v=t("20a2"),C=t.n(v),w=t("q1tI"),k=t("nGE6"),y=t("NKCw"),R=t("UGp+"),_=t("KZYA"),S=t("Tgqd"),L=t("33Fu"),P=t("rp/m"),I=t("kyeR"),E=t("Dp36"),M=t("TsuU"),q=t("58ex"),z=t("l4Zi"),T=t("Vs0p"),F=R.a().shape({name:R.b().max(120,"Maximum 120 characters").required("Wait, you would not forget the name would you?"),description:R.b().max(200,"Maximum 200 characters").required("Don't forget the description"),image:R.b().url(),link:R.b().url().required("Material link required"),tags:R.b().lowercase().min(3,"Come on, at least 3 characters you can do it").max(144,"Maximum 144 characters").required("Tags are important to help others to find the course :)")}),U=!0;function B(e){var r=e.singleCourseData,t=e.currentUser,s=e.courseLiked,f=Object(c.a)(),v=f.isOpen,R=f.onOpen,U=f.onClose,B=Object(w.useState)(s),H=B[0],A=B[1],N=Object(k.useSession)(),G=Object(o.a)(N,1)[0],J=Object(l.a)(),K=Object(z.a)();Object(w.useEffect)((function(){Object(T.a)(r.id)}),[]);var D=null===t||void 0===t?void 0:t.id,W=null===r||void 0===r?void 0:r.id,Z=Object(q.a)(W),Y=Z.data,Q=Z.isLoading,X=Z.isFetching,V=Z.error,$=Object(q.d)(W),ee=$.data,re=$.isLoading,te=$.isFetching,ae=$.error,se=Object(y.b)({resolver:Object(_.a)(F)}),ie=se.register,ne=se.handleSubmit,oe=se.formState,ce=se.errors,le=function(){var e=Object(n.a)(i.a.mark((function e(r){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post("/api/supaRequests",{headers:{type:"course-create-material"},values:r,currentUserId:D,courseId:W});case 2:return t=e.sent,e.next=5,new Promise((function(e){return setTimeout(e,1e3)}));case 5:U(),J({title:"".concat(K.coursePage.toast.title),description:"".concat(K.coursePage.toast.description),status:"success",duration:2e3,isClosable:!0,position:"top-right",onCloseComplete:function(){return C.a.push("/community/summary/".concat(t.data.newMaterialId))}});case 7:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),ue=function(){var e=Object(n.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!G){e.next=12;break}if(!1!==H){e.next=8;break}return A(!H),e.next=5,E.a.post("/api/supaRequests",{headers:{type:"course-like-course"},currentUserId:D,courseId:W});case 5:e.sent,e.next=12;break;case 8:return A(!H),e.next=11,E.a.post("/api/supaRequests",{headers:{type:"course-unlike-course"},currentUserId:D,courseId:W});case 11:e.sent;case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(null===r)return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(O.a,{children:Object(a.jsx)("title",{children:K.page404.tabMessage})}),Object(a.jsx)(I.a,{})]});var de=r;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(O.a,{children:Object(a.jsx)("title",{children:de.name})}),Object(a.jsxs)(u.a,{w:"90%",mx:"auto",display:{md:"flex"},maxWidth:1080,marginTop:12,marginBottom:4,border:"1px",borderColor:"green.700",borderRadius:"2xl",justifyContent:"center",children:[Object(a.jsx)(u.a,{position:"relative",maxHeight:{sm:"240px",md:"xl",lg:"xl"},h:{lg:"xl",md:"xl",sm:"240px"},w:{sm:"100%",md:"50%",lg:"50%"},borderRadius:"2xl",children:Object(a.jsx)(d.a,{maxHeight:{lg:"xl",md:"xl",sm:"240px"},h:{lg:"xl",md:"xl",sm:"240px"},w:"50%",boxSize:"100%",objectFit:"cover",src:""!==de.image?de.image:"/assets/illustrations/courseImg.jpg",fallbac:"/assets/illustrations/courseImg.jpg",alt:"Course Image",borderRadius:"2xl"})}),Object(a.jsxs)(p.b,{h:{md:"xl",sm:"md"},w:{sm:"100%",md:"50%",lg:"50%"},bg:"purple.900",minWidth:{md:"50%",lg:"50%"},alignItems:"left",borderBottomRadius:"2xl",borderTopRightRadius:"2xl",children:[Object(a.jsx)(b.a,{mb:["1","2","4"],fontWeight:"700",fontSize:["xl","2xl","3xl"],lineHeight:"9",px:["6","8"],pt:["2","3","6"],children:de.name}),Object(a.jsx)(b.a,{px:["6","8"],lineHeight:"5",color:"green.600",noOfLines:6,fontSize:["sm","md","lg"],children:de.description}),Object(a.jsx)(j.a,{}),Object(a.jsx)(u.a,{align:"right",w:"100%",children:Object(a.jsx)(p.a,{w:"16",bgColor:"green.900",borderBottomRightRadius:"2xl",borderTopLeftRadius:"2xl",children:Object(a.jsx)(m.a,{pl:"5",size:"lg",color:"green.500",variant:"unstyled",fontSize:"2xl",justifyContent:"center",onClick:ue,isDisabled:!G,children:H?Object(a.jsx)(L.a,{}):Object(a.jsx)(L.b,{})})})})]})]}),Object(a.jsxs)(u.a,{w:"90%",mx:"auto",my:12,maxWidth:1080,justifyContent:"center",children:[Object(a.jsx)(M.a,{title:K.coursePage.topSummaries,materialArray:ee,isLoading:re,isFetching:te,error:ae}),Object(a.jsx)(M.a,{title:K.coursePage.latestSummaries,materialArray:Y,isLoading:Q,isFetching:X,error:V})]}),!!G&&Object(a.jsx)(m.a,{w:"16",h:"16",colorScheme:"purple",position:"fixed",bottom:"36px",right:"36px",alignItems:"center",borderRadius:"full",size:"lg",fontSize:"lg",onClick:R,children:Object(a.jsx)(x.a,{as:S.b,fontSize:"32"})}),Object(a.jsxs)(g.a,{isCentered:!0,size:"2xl",onClose:U,isOpen:v,motionPreset:"slideInBottom",blockScrollOnMount:!1,children:[Object(a.jsx)(g.f,{}),Object(a.jsxs)(g.c,{bg:"purple.800",children:[Object(a.jsx)(g.e,{children:K.coursePage.form.newMaterial}),Object(a.jsx)(g.b,{children:Object(a.jsx)(h.a,{children:Object(a.jsx)(u.a,{as:"form",flex:"1",borderRadius:8,bg:"purple.800",px:"8",py:"2",onSubmit:ne(le),children:Object(a.jsxs)(p.b,{spacing:"4",children:[Object(a.jsx)(P.a,{name:"name",label:K.coursePage.form.name,description:K.coursePage.form.nameEx,descriptionColor:"purple.300",focusBorderColor:"purple.600",bg:"purple.600",variant:"filled",_hover:{bgColor:"purple.700"},error:ce.name,ref:ie}),Object(a.jsx)(P.a,{name:"description",label:K.coursePage.form.description,focusBorderColor:"purple.600",bg:"purple.600",variant:"filled",_hover:{bgColor:"purple.700"},error:ce.description,ref:ie}),Object(a.jsx)(P.a,{name:"image",label:K.coursePage.form.imageURL,description:K.coursePage.form.imageURLEx,descriptionColor:"purple.300",focusBorderColor:"purple.600",bg:"purple.600",variant:"filled",_hover:{bgColor:"purple.700"},error:ce.image,ref:ie}),Object(a.jsx)(P.a,{name:"link",label:K.coursePage.form.materialLink,description:K.coursePage.form.materialLinkEx,descriptionColor:"purple.300",focusBorderColor:"purple.600",bg:"purple.600",variant:"filled",_hover:{bgColor:"purple.700"},error:ce.link,ref:ie}),Object(a.jsx)(u.a,{w:"100%",justify:"flex-initial",children:Object(a.jsx)(P.a,{name:"tags",label:K.coursePage.form.tags,description:K.coursePage.form.tagsEx,descriptionColor:"purple.300",focusBorderColor:"purple.600",bg:"purple.600",variant:"filled",_hover:{bgColor:"purple.700"},error:ce.tags,ref:ie})})]})})})}),Object(a.jsxs)(g.d,{children:[Object(a.jsx)(m.a,{as:"a",colorScheme:"whiteAlpha",variant:"ghost",onClick:U,children:"Close"}),Object(a.jsx)(m.a,{type:"submit",colorScheme:"purple",_hover:{bgColor:"purple.600"},ml:"4",isLoading:oe.isSubmitting,onClick:ne(le),children:"Create"})]})]})]})]})}}},[["8PY8",1,2,8,9,0,3,4,5,7,6,10,11,12,15]]]);