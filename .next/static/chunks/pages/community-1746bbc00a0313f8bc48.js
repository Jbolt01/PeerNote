_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[22],{"+opK":function(e,r,t){e.exports={courseCard:"styles_courseCard__P7vKk",fadeIn:"styles_fadeIn__1b9pI"}},"2lx9":function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/community",function(){return t("C91w")}])},"8s4A":function(e,r,t){"use strict";t.d(r,"a",(function(){return C}));var o=t("nKUr"),s=t("tofy"),n=t("MAJE"),i=t("M/Vb"),a=t("v7Hm"),c=t("z0gp"),l=t("8ZLp"),u=t("wZsY"),d=t("vG+z"),b=t("wCIg"),j=t("YFqc"),m=t.n(j),g=t("Tgqd"),p=t("33Fu"),x=t("+opK"),h=t.n(x),O=t("kyeR"),f=t("l4Zi");function C(e){var r=e.coursesArray,t=e.title,j=e.isLoading,x=void 0!==j&&j,C=e.isFetching,v=void 0!==C&&C,y=e.error,_=Object(f.a)();return Object(o.jsxs)(o.Fragment,{children:[!!t&&Object(o.jsxs)(s.a,{mt:"8",align:"center",children:[Object(o.jsx)(n.a,{fontSize:"3xl",fontWeight:"semibold",children:t}),v&&Object(o.jsx)(i.a,{color:"purple.600",size:"md",ml:"3"})]}),Object(o.jsx)(a.a,{width:"100%",pt:"4",mb:"4",children:x?Object(o.jsxs)(c.a,{w:"100%",spacing:"4",columns:[1,2,2,3],children:[Object(o.jsx)(l.a,{h:"96",startColor:"purple.600",endColor:"purple.800",borderRadius:"2xl"})," ",Object(o.jsx)(l.a,{h:"96",startColor:"purple.600",endColor:"purple.800",borderRadius:"2xl"})," ",Object(o.jsx)(l.a,{h:"96",startColor:"purple.600",endColor:"purple.800",borderRadius:"2xl"})," ",Object(o.jsx)(l.a,{h:"96",startColor:"purple.600",endColor:"purple.800",borderRadius:"2xl"}),Object(o.jsx)(l.a,{h:"96",startColor:"purple.600",endColor:"purple.800",borderRadius:"2xl"}),Object(o.jsx)(l.a,{h:"96",startColor:"purple.600",endColor:"purple.800",borderRadius:"2xl"})]}):y?Object(o.jsx)(n.a,{children:"Woops, Error in React Query"}):Object(o.jsx)(u.b,{w:"100%",children:r&&(null===r||void 0===r?void 0:r.length)>0&&null!==r?Object(o.jsx)(c.a,{w:"100%",spacing:"4",columns:[1,2,2,3],children:r.map((function(e){return Object(o.jsx)(m.a,{href:"/community/course/".concat(e.id),children:Object(o.jsx)("a",{children:Object(o.jsxs)(a.a,{className:h.a.courseCard,position:"relative",bg:"green.900",height:"96",borderRadius:"2xl",children:[Object(o.jsx)(d.a,{src:""!==e.image?e.image:"/assets/illustrations/CursoPhotoSource.svg",alt:_.courseList.thumbAlt,w:"100%",h:"55%",borderTopRadius:"2xl",objectFit:"cover"}),Object(o.jsxs)(u.b,{position:"absolute",px:2,py:1,h:"45%",alignItems:"flex-start",children:[Object(o.jsx)(n.a,{fontSize:"lg",fontWeight:"600",noOfLines:3,children:e.name}),Object(o.jsx)(b.a,{}),Object(o.jsxs)(a.a,{alignItems:"flex-start",spacing:"0",pb:"0.5",children:[Object(o.jsxs)(s.a,{align:"baseline",children:[Object(o.jsx)(a.a,{mr:"1",color:"green.500",children:Object(o.jsx)(g.b,{})}),Object(o.jsx)(n.a,{color:"green.500",children:null!==e.materials_available&&e.materials_available>0?"".concat(e.materials_available," ").concat(_.courseList.manySummaries):"".concat(_.courseList.noSummary)})]}),Object(o.jsxs)(s.a,{align:"baseline",children:[Object(o.jsx)(a.a,{mr:"1",color:"green.500",children:Object(o.jsx)(p.a,{})}),Object(o.jsx)(n.a,{color:"green.500",children:null!==e.likes&&1===e.likes?"".concat(e.likes," ").concat(_.courseList.like):e.likes>1?"".concat(e.likes," ").concat(_.courseList.like,"s"):"".concat(_.courseList.noLikes)})]})]})]})]})})},e.id)}))}):Object(o.jsx)(O.a,{h:"96",w:"100%",boxSize:"120px",activeBackground:!0})})})]})}},C91w:function(e,r,t){"use strict";t.r(r),t.d(r,"__N_SSP",(function(){return A})),t.d(r,"default",(function(){return F}));var o=t("nKUr"),s=t("vJKn"),n=t.n(s),i=t("rg98"),a=t("xvhg"),c=t("0HfK"),l=t("VP/N"),u=t("vG+z"),d=t("3L07"),b=t("oSKe"),j=t("ueHc"),m=t("kiPq"),g=t("v7Hm"),p=t("wZsY"),x=t("g4pe"),h=t.n(x),O=t("v7au"),f=t("nGE6"),C=t("UGp+"),v=t("KZYA"),y=t("NKCw"),_=t("20a2"),w=t.n(_),P=t("MAJE"),S=t("Dp36"),k=t("rp/m"),L=t("oK0D"),N=t.n(L),R=t("8s4A"),z=t("Vs0p"),E=t("l4Zi"),K=C.a().shape({name:C.b().max(120,"Maximum 120 characters").required("Wait, you would not forget the name would you?"),description:C.b().max(200,"Maximum 200 characters").required("Don't forget the description"),image:C.b().url(),tags:C.b().lowercase().min(3,"Come on, at least 3 characters you can do it").max(144,"Maximum 144 characters").required("Tags are important to help others to find the course :)")}),A=!0;function F(e){var r=e.currentUser,t=Object(f.useSession)(),s=Object(a.a)(t,1)[0],x=Object(c.a)(),C=Object(E.a)(),_=Object(l.a)(),L=_.isOpen,A=_.onOpen,F=_.onClose,I=null===r||void 0===r?void 0:r.id,B=Object(z.b)(),T=B.data,q=B.isLoading,M=B.isFetching,U=B.error,Z=Object(z.d)(),D=Z.data,H=Z.isLoading,J=Z.isFetching,W=Z.error,G=Object(y.b)({resolver:Object(v.a)(K)}),Y=G.register,V=G.handleSubmit,X=G.formState,Q=G.errors,$=function(){var e=Object(i.a)(n.a.mark((function e(r){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.post("api/supaRequests",{headers:{type:"community-create-course"},values:r,currentUserId:I});case 2:t=e.sent,F(),200===t.status&&x({title:"".concat(C.communityPage.toast.title),description:"".concat(C.communityPage.toast.description),status:"success",duration:2e3,isClosable:!0,position:"top-right",onCloseComplete:function(){return w.a.push("/community/course/".concat(t.data.newCourseNumberSlug))}});case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(h.a,{children:Object(o.jsxs)("title",{children:[C.communityPage.community," | PeerNote"]})}),Object(o.jsxs)("div",{className:N.a.main,children:[Object(o.jsxs)("div",{className:N.a.topText,children:[Object(o.jsx)(u.a,{src:"/assets/icons/world.svg",alt:"world, pretty handsome huh?"}),Object(o.jsx)(P.a,{fontSize:["4xl"],fontWeight:"bold",ml:"2",children:C.communityPage.community})]}),Object(o.jsx)(R.a,{title:C.communityPage.latestCourses,coursesArray:T,isLoading:q,isFetching:M,error:U}),Object(o.jsx)(R.a,{title:C.communityPage.topLiked,coursesArray:D,isLoading:H,isFetching:J,error:W}),!!s&&Object(o.jsx)(d.a,{colorScheme:"green",position:"fixed",bottom:"36px",right:"36px",w:"16",h:"16",alignItems:"center",borderRadius:"full",size:"lg",fontSize:"lg",onClick:A,children:Object(o.jsx)(b.a,{as:O.a,fontSize:"36"})})]}),Object(o.jsxs)(j.a,{isCentered:!0,size:"3xl",onClose:F,isOpen:L,motionPreset:"slideInBottom",blockScrollOnMount:!1,children:[Object(o.jsx)(j.f,{}),Object(o.jsxs)(j.c,{bg:"green.900",children:[Object(o.jsx)(j.e,{children:C.communityPage.form.newCourse}),Object(o.jsx)(j.b,{children:Object(o.jsx)(m.a,{children:Object(o.jsx)(g.a,{as:"form",flex:"1",borderRadius:8,bg:"green.900",px:"8",py:"2",onSubmit:V($),children:Object(o.jsxs)(p.b,{spacing:"4",children:[Object(o.jsx)(k.a,{name:"name",label:C.communityPage.form.courseName,description:C.communityPage.form.courseNameEx,descriptionColor:"green.300",focusBorderColor:"green.600",bg:"green.700",variant:"filled",_hover:{bgColor:"green.800"},error:Q.name,ref:Y}),Object(o.jsx)(k.a,{name:"description",label:C.communityPage.form.courseDescription,focusBorderColor:"green.600",bg:"green.700",variant:"filled",_hover:{bgColor:"green.800"},error:Q.description,ref:Y}),Object(o.jsx)(k.a,{name:"image",label:C.communityPage.form.courseUrl,focusBorderColor:"green.600",bg:"green.700",variant:"filled",_hover:{bgColor:"green.800"},error:Q.image,ref:Y}),Object(o.jsx)(g.a,{w:"100%",justify:"flex-initial",children:Object(o.jsx)(k.a,{name:"tags",label:C.communityPage.form.tags,description:C.communityPage.form.tagsEx,descriptionColor:"green.300",focusBorderColor:"green.600",bg:"green.700",variant:"filled",_hover:{bgColor:"green.800"},error:Q.tags,ref:Y})})]})})})}),Object(o.jsxs)(j.d,{children:[Object(o.jsx)(d.a,{as:"a",colorScheme:"whiteAlpha",variant:"ghost",onClick:F,children:C.communityPage.form.closeButton}),Object(o.jsx)(d.a,{type:"submit",colorScheme:"green",_hover:{bgColor:"green.600"},ml:"4",isLoading:X.isSubmitting,onClick:V($),children:C.communityPage.form.createButton})]})]})]})]})}},oK0D:function(e,r,t){e.exports={main:"styles_main__R3zni",topText:"styles_topText__86HeE"}}},[["2lx9",1,2,8,17,0,3,4,5,7,6,10,11,12,15]]]);